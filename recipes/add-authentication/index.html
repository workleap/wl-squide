<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <meta name="turbo-root" content="/wl-squide">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="4.0.1.825476440309">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 4.0.1">

    <!-- Primary Meta Tags -->
    <title>Add authentication</title>
    <meta name="title" content="Add authentication">
    <meta name="description" content="Before going forward with this recipe, make sure that you complete the Setup MSW and Fetch global protected data guides.">

    <!-- Canonical -->
    <link rel="canonical" href="https://workleap.github.io/wl-squide/recipes/add-authentication/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://workleap.github.io/wl-squide/recipes/add-authentication/">
    <meta property="og:title" content="Add authentication">
    <meta property="og:description" content="Before going forward with this recipe, make sure that you complete the Setup MSW and Fetch global protected data guides.">
    <meta property="og:site_name" content="Squide">
    <meta property="og:locale" content="en_US">

    <script data-cfasync="false">(function(){var cl=document.documentElement.classList,ls=localStorage.getItem("retype_scheme"),hd=cl.contains("dark"),hl=cl.contains("light"),wm=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;if(ls==="dark"||(!ls&&wm&&!hd&&!hl)){cl.remove("light");cl.add("dark")}else if(ls==="light"||(!ls&&!wm&&!hd&&!hl)){cl.remove("dark");cl.add("light")}})();</script>

    <link id="retype-favicon" rel="icon" href="../../static/favicon.png" />
    <link href="../../resources/css/retype.css?v=4.0.1.825476440309" rel="stylesheet">

    <script data-cfasync="false" src="../../resources/js/config.js?v=4.0.1.825476440309" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../resources/js/retype.js?v=4.0.1" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../resources/js/lunr.js?v=4.0.1.825476440309" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../resources/js/prism.js?v=4.0.1.825476440309" defer></script>

    <link href="https://workleap.github.io/wl-idp-docs-hub/static/retype-customization.css" rel="stylesheet" />

    <style>
        .callout-nested-list ul {
            margin-bottom: 0 !important;
        }
    </style>

</head>
<body>
    <div id="retype-app" class="relative text-base antialiased text-base-text bg-base-bg font-body">
    <div class="absolute bottom-0 left-0" style="top: 5rem; right: 50%"></div>

    <header id="retype-header" class="sticky top-0 z-30 flex w-full h-16 bg-header-bg border-b border-header-border md:h-20">
        <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
            <!-- Mobile menu button skeleton -->
            <button v-cloak class="skeleton retype-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-hidden rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
            <div v-cloak id="retype-sidebar-left-toggle-button"></div>
    
            <!-- Logo -->
            <div class="flex items-center justify-between h-full py-2 md:w-75">
                <div class="flex items-center px-2 md:px-6">
                    <a id="docs-hub-link" href="https://workleap.github.io/wl-idp-docs-hub/" title="Workleap's Frontend Platform homepage">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="30" viewBox="0 0 12 30" fill="currentColor" aria-label="Home" focusable="false" role="img">
                            <path d="M10.6763 23.0822C10.4303 23.328 10.0967 23.4661 9.74885 23.4661C9.40103 23.4661 9.06744 23.328 8.82135 23.0822L1.38384 15.6447C1.13806 15.3986 1 15.065 1 14.7172C1 14.3694 1.13806 14.0358 1.38384 13.7897L8.82135 6.35222C9.0703 6.1205 9.39939 5.99432 9.73945 6.0002C10.0795 6.00607 10.404 6.14354 10.6448 6.38372C10.885 6.62452 11.0225 6.94906 11.0284 7.28912C11.0342 7.62917 10.9081 7.95826 10.6763 8.20722L4.16635 14.7172L10.6763 21.2272C10.9221 21.4733 11.0602 21.8069 11.0602 22.1547C11.0602 22.5025 10.9221 22.8361 10.6763 23.0822Z" />
                        </svg>
                    </a>
                    <a id="retype-branding-logo" href="../../" class="flex items-center leading-snug text-2xl">
                        <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                            <img class="max-h-10 dark:hidden md:inline-block" src="../../static/logo.png">
                            <img class="max-h-10 hidden dark:inline-block" src="../../static/logo.png">
                        </span>
                        <span class="dark:text-white font-bold line-clamp-1 md:line-clamp-2">Squide</span>
                    </a>
                </div>
    
                <span class="hidden h-8 border-r md:inline-block border-base-border"></span>
            </div>
    
            <div class="flex justify-between md:grow">
                <!-- Top Nav -->
                <nav id="retype-header-nav" class="hidden md:flex">
                    <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="../../introduction/getting-started/">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"/>
                                    </g>
                                </svg>
                                <span>Home</span>
                            </a>
                        </li>
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/issues" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Zm9.5 2a2 2 0 1 1-.001-3.999A2 2 0 0 1 12 14Z"/>
                                    </g>
                                </svg>
                                <span>Found a bug?</span>
                            </a>
                        </li>
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/discussions" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                    </g>
                                </svg>
                                <span>Feature requests</span>
                            </a>
                        </li>
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/releases" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M7.75 6.5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z"/><path d="M2.5 1h8.44a1.5 1.5 0 0 1 1.06.44l10.25 10.25a1.5 1.5 0 0 1 0 2.12l-8.44 8.44a1.5 1.5 0 0 1-2.12 0L1.44 12A1.497 1.497 0 0 1 1 10.94V2.5A1.5 1.5 0 0 1 2.5 1Zm0 1.5v8.44l10.25 10.25 8.44-8.44L10.94 2.5Z"/>
                                    </g>
                                </svg>
                                <span>Releases</span>
                            </a>
                        </li>
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M10.303 16.652c-2.837-.344-4.835-2.385-4.835-5.028 0-1.074.387-2.235 1.031-3.008-.279-.709-.236-2.214.086-2.837.86-.107 2.02.344 2.708.967.816-.258 1.676-.386 2.728-.386 1.053 0 1.913.128 2.686.365.666-.602 1.848-1.053 2.708-.946.3.581.344 2.085.064 2.815.688.817 1.053 1.913 1.053 3.03 0 2.643-1.998 4.641-4.877 5.006.73.473 1.224 1.504 1.224 2.686v2.235c0 .644.537 1.01 1.182.752 3.889-1.483 6.94-5.372 6.94-10.185 0-6.081-4.942-11.044-11.022-11.044-6.081 0-10.98 4.963-10.98 11.044a10.84 10.84 0 0 0 7.112 10.206c.58.215 1.139-.172 1.139-.752v-1.719a2.768 2.768 0 0 1-1.032.215c-1.418 0-2.256-.773-2.857-2.213-.237-.58-.495-.924-.989-.988-.258-.022-.344-.129-.344-.258 0-.258.43-.451.86-.451.623 0 1.16.386 1.719 1.181.43.623.881.903 1.418.903.537 0 .881-.194 1.375-.688.365-.365.645-.687.903-.902Z"/>
                                    </g>
                                </svg>
                                <span>Github</span>
                            </a>
                        </li>
                        <li class="mr-6">
                            <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://www.npmjs.com/settings/squide/packages" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M0 0H24V24H0V0Z" fill="#CC0000"/><path d="M11.9184 2.57758H2.57764V21.4214H11.9175V7.32958H16.6695V21.4214H21.4215V2.57758H11.9184Z" fill="white"/>
                                    </g>
                                </svg>
                                <span>NPM</span>
                            </a>
                        </li>
    
                    </ul>
                </nav>
    
                <div v-cloak class="flex justify-end grow">
                    <div id="retype-mobile-search-button"></div>
                    <doc-search-desktop></doc-search-desktop>
    
                    <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                    <doc-history></doc-history>
                </div>
            </div>
        </div>
    </header>


    <div id="retype-container" class="container relative flex bg-white">
        <!-- Sidebar Skeleton -->
        <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-sidebar-left-bg border-sidebar-left-border sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton">
        
        
            <div class="pl-6 mt-1 mb-4">
                <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
            </div>
        
        </div>
        
        <!-- Sidebar component -->
        <doc-sidebar v-cloak>
            <template #sidebar-footer>
                <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-base-border">
        
                    <div class="py-3 px-6 md:hidden border-b dark:border-base-border">
                        <nav>
                            <ul class="flex flex-wrap justify-center items-center">
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="../../introduction/getting-started/">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                            <g fill="currentColor">
                                                <path d="M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"/>
                                            </g>
                                        </svg>
                                        <span>Home</span>
                                    </a>
                                </li>
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/issues" target="_blank">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                            <g fill="currentColor">
                                                <path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Zm9.5 2a2 2 0 1 1-.001-3.999A2 2 0 0 1 12 14Z"/>
                                            </g>
                                        </svg>
                                        <span>Found a bug?</span>
                                    </a>
                                </li>
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/discussions" target="_blank">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                            <g fill="currentColor">
                                                <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                            </g>
                                        </svg>
                                        <span>Feature requests</span>
                                    </a>
                                </li>
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/releases" target="_blank">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                            <g fill="currentColor">
                                                <path d="M7.75 6.5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z"/><path d="M2.5 1h8.44a1.5 1.5 0 0 1 1.06.44l10.25 10.25a1.5 1.5 0 0 1 0 2.12l-8.44 8.44a1.5 1.5 0 0 1-2.12 0L1.44 12A1.497 1.497 0 0 1 1 10.94V2.5A1.5 1.5 0 0 1 2.5 1Zm0 1.5v8.44l10.25 10.25 8.44-8.44L10.94 2.5Z"/>
                                            </g>
                                        </svg>
                                        <span>Releases</span>
                                    </a>
                                </li>
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://github.com/workleap/wl-squide" target="_blank">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                            <g fill="currentColor">
                                                <path d="M10.303 16.652c-2.837-.344-4.835-2.385-4.835-5.028 0-1.074.387-2.235 1.031-3.008-.279-.709-.236-2.214.086-2.837.86-.107 2.02.344 2.708.967.816-.258 1.676-.386 2.728-.386 1.053 0 1.913.128 2.686.365.666-.602 1.848-1.053 2.708-.946.3.581.344 2.085.064 2.815.688.817 1.053 1.913 1.053 3.03 0 2.643-1.998 4.641-4.877 5.006.73.473 1.224 1.504 1.224 2.686v2.235c0 .644.537 1.01 1.182.752 3.889-1.483 6.94-5.372 6.94-10.185 0-6.081-4.942-11.044-11.022-11.044-6.081 0-10.98 4.963-10.98 11.044a10.84 10.84 0 0 0 7.112 10.206c.58.215 1.139-.172 1.139-.752v-1.719a2.768 2.768 0 0 1-1.032.215c-1.418 0-2.256-.773-2.857-2.213-.237-.58-.495-.924-.989-.988-.258-.022-.344-.129-.344-.258 0-.258.43-.451.86-.451.623 0 1.16.386 1.719 1.181.43.623.881.903 1.418.903.537 0 .881-.194 1.375-.688.365-.365.645-.687.903-.902Z"/>
                                            </g>
                                        </svg>
                                        <span>Github</span>
                                    </a>
                                </li>
                                <li class="mr-6">
                                    <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text hover:text-header-text-hover" href="https://www.npmjs.com/settings/squide/packages" target="_blank">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                            <g fill="currentColor">
                                                <path d="M0 0H24V24H0V0Z" fill="#CC0000"/><path d="M11.9184 2.57758H2.57764V21.4214H11.9175V7.32958H16.6695V21.4214H21.4215V2.57758H11.9184Z" fill="white"/>
                                            </g>
                                        </svg>
                                        <span>NPM</span>
                                    </a>
                                </li>
        
                            </ul>
                        </nav>
                    </div>
                </div>
            </template>
        </doc-sidebar>

        <div class="grow min-w-0 bg-body-bg">
            <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
<div class="flex">
    <div id="retype-main" class="min-w-0 p-4 grow md:px-16">
        <main class="relative pb-12 lg:pt-2">
            <div class="retype-markdown" id="retype-content">
                <!-- Rendered if sidebar right is enabled -->
                <div id="retype-sidebar-right-toggle"></div>
                <nav id="retype-breadcrumb" class="breadcrumb" aria-label="Breadcrumb">
                    <ol role="list">
                        <li class="pr-4">
                            <a href="../../recipes/" class="pr-4">
                                Recipes
                            </a>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/>
                            </svg>
                        </li>
                        <li class="pr-4">
                            <a href="../../recipes/add-authentication/" class="pr-4">
                                Add authentication
                            </a>
                        </li>
                    </ol>
                </nav>

                <!-- Page content  -->
<doc-anchor-target id="add-authentication" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#add-authentication">#</doc-anchor-trigger>
        <span>Add authentication</span>
    </h1>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1.5 rounded-tl-lg rounded-bl-lg bg-callout-warning"></div>
    <div class="flex w-full py-4 border border-l-0 rounded-tr-lg rounded-br-lg doc-callout bg-callout-base-bg border-callout-base-border" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-callout-warning" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Before going forward with this recipe, make sure that you complete the <a href="../../integrations/setup-msw/">Setup MSW</a> and <a href="../../essentials/fetch-protected-global-data/">Fetch global protected data</a> guides.</p>
        </div>
    </div>
</div>
<p>Most of Workleap&#x27;s applications, if not all, will eventually require user authentication. While Squide doesn&#x27;t offer built-in primitives for this process, it can assist by providing a <strong>well-established recipe</strong> to integrate an authentication flow with Squide.</p>
<doc-anchor-target id="add-a-login-page">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#add-a-login-page">#</doc-anchor-trigger>
        <span>Add a login page</span>
    </h2>
</doc-anchor-target>
<p>First, open a terminal at the root of the host application and install the <a href="https://www.npmjs.com/package/@squide/fakes" class="outbound" target="_blank">@squide/fakes</a> package:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-bash"><code v-pre class="language-bash">pnpm add @squide/fakes</code></pre>
</doc-codeblock></div>
<p>Then, add a <a href="https://mswjs.io/" class="outbound" target="_blank">Mock Service Worker</a> (MSW) request handler to authenticate a user:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/mocks/handlers.ts</div>
<pre translate="no" class="language-typescript" data-line="29-31,41-44"><code v-pre class="language-typescript">import { HttpResponse, http, type HttpHandler } from &quot;msw&quot;;
import { LocalStorageSessionManager } from &quot;@squide/fakes&quot;;

interface LoginCredentials {
    username: string;
    password: string;
}

const Users = [
    {
        username: &quot;temp&quot;,
        password: &quot;temp&quot;
    }
];

export interface Session {
    username: string;
    preferredLanguage: string;
}

// For simplicity, we are using a local storage session manager for this guide.
export const sessionManager = new LocalStorageSessionManager&lt;Session&gt;();

export const requestHandlers: HttpHandler[] = [
    http.post(&quot;/api/login&quot;, async ({ request }) =&gt; {
        const { username, password } = await request.json() as LoginCredentials;

        // Try to match the credentials against existing users.
        const user = Users.find(x =&gt; {
            return x.username === username &amp;&amp; x.password === password;
        });

        // If the user doesn't exist, return a 401.
        if (!user) {
            return new HttpResponse(null, {
                status: 401
            });
        }

        // Login the user by storing the session to the local storage.
        sessionManager.setSession({
            username: user.username,
            preferredLanguage: user.preferredLanguage
        });

        return new HttpResponse(null, {
            status: 200
        });
    })
];</code></pre>
</doc-codeblock></div>
<p>In the previous code sample, the endpoint attempts to authenticate the provided credentials against existing users. If there&#x27;s a match, the user session is stored in the local storage using a <a href="../../reference/fakes/localstoragesessionmanager/">LocalStorageSessionManager</a> instance, and a <code translate="no" v-pre>200</code> status code is returned.</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1.5 rounded-tl-lg rounded-bl-lg bg-callout-warning"></div>
    <div class="flex w-full py-4 border border-l-0 rounded-tr-lg rounded-br-lg doc-callout bg-callout-base-bg border-callout-base-border" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-callout-warning" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Our security department reminds you to refrain from using a fake <code translate="no" v-pre>LocalStorageSessionManager</code> in a production application <span class="docs-emoji">&#x1F60A;</span></p>
        </div>
    </div>
</div>
<p>Next, register the request handler using the host application module registration function:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/register.tsx</div>
<pre translate="no" class="language-tsx" data-line="3-11"><code v-pre class="language-tsx">import type { ModuleRegisterFunction, FireflyRuntime } from &quot;@squide/firefly&quot;;

export const registerHost: ModuleRegisterFunction&lt;FireflyRuntime&gt; = async runtime =&gt; {
    if (runtime.isMswEnabled) {
        // Files that includes an import to the &quot;msw&quot; package are included dynamically to prevent adding
        // unused MSW stuff to the application bundles.
        const requestHandlers = (await import(&quot;../mocks/handlers.ts&quot;)).requestHandlers;

        runtime.registerRequestHandlers(requestHandlers);
    }
};</code></pre>
</doc-codeblock></div>
<p>Then, create a login page:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/Login.tsx</div>
<pre translate="no" class="language-tsx" data-line="13-22,26"><code v-pre class="language-tsx">import { useCallback, useState, type ChangeEvent, type MouseEvent } from &quot;react&quot;;
import { Navigate, useNavigate } from &quot;react-router/dom&quot;;

export function Login() {
    const [username, setUserName] = useState(&quot;&quot;);
    const [password, setPassword] = useState(&quot;&quot;);

    const navigate = useNavigate();

    const handleClick = useCallback((event: MouseEvent&lt;HTMLButtonElement&gt;) =&gt; {
        event.preventDefault();

        const response = await fetch(&quot;/api/login&quot;, {
            body: JSON.stringify({ 
                username, 
                password
            }),
            method: &quot;POST&quot;,
            headers: {
                &quot;Content-Type&quot;: &quot;application/json&quot;
            }
        });

        if (response.ok) {
            // Reload the application after a login.
            window.location.href = &quot;/&quot;;
        }
    }, [username, password, navigate]);

    const handleUserNameChange = useCallback((event: ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
        setUserName(event.target.value);
    }, []);

    const handlePasswordChange = useCallback((event: ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
        setPassword(event.target.value);
    }, []);

    return (
        &lt;main&gt;
            &lt;h1&gt;Login&lt;/h1&gt;
            &lt;form&gt;
                &lt;div&gt;
                    &lt;label htmlFor=&quot;username&quot;&gt;Username&lt;/label&gt;
                    &lt;input id=&quot;username&quot; type=&quot;text&quot; onChange={handleUserNameChange} /&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    &lt;label htmlFor=&quot;password&quot;&gt;Password&lt;/label&gt;
                    &lt;input id=&quot;password&quot; type=&quot;password&quot; onChange={handlePasswordChange} /&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    &lt;button type=&quot;submit&quot; onClick={handleClick}&gt;
                        Login
                    &lt;/button&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/main&gt;
    );
}</code></pre>
</doc-codeblock></div>
<p>After the user logs in, the application is reloaded, this is a requirement of the <a href="../../reference/routing/approuter/">AppRouter</a> component. Nevertheless, it&#x27;s not a concern because Workleap&#x27;s applications use a third-party service for authentication which requires a full refresh of the application.</p>
<doc-anchor-target id="create-a-session-manager">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#create-a-session-manager">#</doc-anchor-trigger>
        <span>Create a session manager</span>
    </h2>
</doc-anchor-target>
<p>Next, create a shared type for the session and the session manager:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">shared/src/session.ts</div>
<pre translate="no" class="language-typescript" data-line="7-10"><code v-pre class="language-typescript">export interface Session {
    user: {
        name: string;
    };
}

export interface SessionManager {
    getSession: () =&gt; Session | undefined;
    clearSession: () =&gt; void;
}</code></pre>
</doc-codeblock></div>
<p>Then, create a shared <code translate="no" v-pre>SessionManagerContext</code> along with some utility hooks. This React context will be used to share the <code translate="no" v-pre>SessionManager</code> instance down the components tree:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">shared/src/session.ts</div>
<pre translate="no" class="language-typescript" data-line="1"><code v-pre class="language-typescript">export const SessionManagerContext = createContext&lt;SessionManager | undefined&gt;(undefined);

export function useSessionManager() {
    return useContext(SessionManagerContext);
}

export function useSession() {
    const sessionManager = useSessionManager();

    return sessionManager?.getSession();
}

export function useIsAuthenticated() {
    const sessionManager = useSessionManager();

    return !!sessionManager?.getSession();
}</code></pre>
</doc-codeblock></div>
<p>Finally, let&#x27;s go back to the host application and create a <a href="https://tanstack.com/query/latest" class="outbound" target="_blank">TanStack Query</a> implementation of the shared <code translate="no" v-pre>SessionManager</code> interface created previously:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/sessionManager.ts</div>
<pre translate="no" class="language-typescript" data-line="4-22"><code v-pre class="language-typescript">import type { SessionManager, Session } from &quot;@sample/shared&quot;;
import { useQueryClient, type QueryClient } from &quot;@tanstack/react-query&quot;;

class TanstackQuerySessionManager implements SessionManager {
    #session: Session | undefined;
    readonly #queryClient: QueryClient;

    constructor(session: Session, queryClient: QueryClient) {
        this.#session = session;
        this.#queryClient = queryClient;
    }

    getSession() {
        return this.#session;
    }

    clearSession() {
        this.#session = undefined;

        this.#queryClient.invalidateQueries({ queryKey: [&quot;/api/session&quot;], refetchType: &quot;inactive&quot; });
    }
}

export function useSessionManagerInstance(session: Session) {
    const queryClient = useQueryClient();

    return useMemo(() =&gt; new TanstackQuerySessionManager(session, queryClient), [session, queryClient]);
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="fetch-the-session">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#fetch-the-session">#</doc-anchor-trigger>
        <span>Fetch the session</span>
    </h2>
</doc-anchor-target>
<p>Next, create an MSW request handler that returns a session object if a user is authenticated:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/mocks/handlers.ts</div>
<pre translate="no" class="language-typescript" data-line="50-61"><code v-pre class="language-typescript">import { HttpResponse, http, type HttpHandler } from &quot;msw&quot;;
import { LocalStorageSessionManager } from &quot;@squide/fakes&quot;;

interface LoginCredentials {
    username: string;
    password: string;
}

const Users = [
    {
        username: &quot;temp&quot;,
        password: &quot;temp&quot;
    }
];

export interface Session {
    username: string;
    preferredLanguage: string;
}

// For simplicity, we are using a local storage session manager for this guide.
export const sessionManager = new LocalStorageSessionManager&lt;Session&gt;();

export const requestHandlers: HttpHandler[] = [
    http.post(&quot;/api/login&quot;, async ({ request }) =&gt; {
        const { username, password } = await request.json() as LoginCredentials;

        // Try to match the credentials against existing users.
        const user = Users.find(x =&gt; {
            return x.username === username &amp;&amp; x.password === password;
        });

        // If the user doesn't exist, return a 401.
        if (!user) {
            return new HttpResponse(null, {
                status: 401
            });
        }

        // Login the user by storing the session to the local storage.
        sessionManager.setSession({
            username: user.username
        });

        return new HttpResponse(null, {
            status: 200
        });
    }),

    http.post(&quot;/api/session&quot;, ({ request }) =&gt; {
        // Retrieve the session stored by the /api/login endpoint.
        const session = sessionManager.getSession();

        if (!session) {
            return new HttpResponse(null, {
                status: 401
            });
        }

        return HttpResponse.json(session);
    })
];</code></pre>
</doc-codeblock></div>
<p>Then, update the host application <code translate="no" v-pre>App</code> component to load the session with the <a href="../../reference/global-data-fetching/useprotecteddataqueries/">useProtectedDataQueries</a> hook and create an instance of <code translate="no" v-pre>TanstackQuerySessionManager</code> with the retrieved session to share the sessuib via the <code translate="no" v-pre>SessionManagerContext</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/App.tsx</div>
<pre translate="no" class="language-tsx" data-line="8-29,31,38,46,56"><code v-pre class="language-tsx">import { AppRouter, useProtectedDataQueries, useIsBootstrapping } from &quot;@squide/firefly&quot;;
import { createBrowserRouter, Outlet } from &quot;react-router&quot;;
import { RouterProvider } from &quot;react-router/dom&quot;;
import { SessionManagerContext, ApiError, isApiError, type Session } from &quot;@sample/shared&quot;;
import { useSessionManagerInstance } from &quot;./sessionManager.ts&quot;;

function BootstrappingRoute() {
    const [session] = useProtectedDataQueries([
        {
            queryKey: [&quot;/api/session&quot;],
            queryFn: async () =&gt; {
                const response = await fetch(&quot;/api/session&quot;);

                if (!response.ok) {
                    throw new ApiError(response.status, response.statusText);
                }

                const data = await response.json();

                const result: Session = {
                    user: {
                        name: data.username,
                    }
                };

                return result;
            }
        }
    ], error =&gt; isApiError(error) &amp;&amp; error.status === 401);

    const sessionManager = useSessionManagerInstance(session!);

    if (useIsBootstrapping()) {
        return &lt;div&gt;Loading...&lt;/div&gt;;
    }

    return (
        &lt;SessionManagerContext.Provider value={sessionManager}&gt;
            &lt;Outlet /&gt;
        &lt;/SessionManagerContext.Provider&gt;
    );
}

export function App() {
    return (
        &lt;AppRouter waitForProtectedData&gt;
            {({ rootRoute, registeredRoutes, routerProviderProps }) =&gt; {
                return (
                    &lt;RouterProvider
                        router={createBrowserRouter([
                            {
                                element: rootRoute,
                                children: [
                                    {
                                        element: &lt;BootstrappingRoute /&gt;,
                                        children: registeredRoutes
                                    }
                                ]
                            }
                        ])}
                        {...routerProviderProps}
                    /&gt;
                );
            }}
        &lt;/AppRouter&gt;
    );
}</code></pre>
</doc-codeblock></div>
<p>The previous example uses the following implementation of the <code translate="no" v-pre>ApiError</code> class:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">shared/src/apiError.ts</div>
<pre translate="no" class="language-typescript"><code v-pre class="language-typescript">export class ApiError extends Error {
    readonly #status: number;
    readonly #statusText: string;
    readonly #stack?: string;

    constructor(status: number, statusText: string, innerStack?: string) {
        super(`${status} ${statusText}`);

        this.#status = status;
        this.#statusText = statusText;
        this.#stack = innerStack;
    }

    get status() {
        return this.#status;
    }

    get statusText() {
        return this.#statusText;
    }

    get stack() {
        return this.#stack;
    }
}

export function isApiError(error?: unknown): error is ApiError {
    return error !== undefined &amp;&amp; error !== null &amp;&amp; error instanceof ApiError;
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="add-an-authentication-boundary">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#add-an-authentication-boundary">#</doc-anchor-trigger>
        <span>Add an authentication boundary</span>
    </h2>
</doc-anchor-target>
<p>Next, create an authentication boundary component using the shared <code translate="no" v-pre>useIsAuthenticated</code> hook created earlier to redirect unauthenticated user to the login page:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/AuthenticationBoundary.tsx</div>
<pre translate="no" class="language-tsx" data-line="4-12"><code v-pre class="language-tsx">import { Navigate, Outlet } from &quot;react-router&quot;;
import { useIsAuthenticated } from &quot;@sample/shared&quot;;

export function AuthenticationBoundary() {
    const isAuthenticated = useIsAuthenticated();

    if (isAuthenticated) {
        return &lt;Outlet /&gt;;
    }

    return &lt;Navigate to=&quot;/login&quot; /&gt;;
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="define-an-authenticated-layout">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#define-an-authenticated-layout">#</doc-anchor-trigger>
        <span>Define an authenticated layout</span>
    </h2>
</doc-anchor-target>
<p>Now, let&#x27;s add a specific layout for authenticated users that passes through the <code translate="no" v-pre>AuthenticationBoundary</code> component.</p>
<p>First, add a MSW request handler to log out a user:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/mocks/handlers.ts</div>
<pre translate="no" class="language-typescript" data-line="48-55"><code v-pre class="language-typescript">import { HttpResponse, http, type HttpHandler } from &quot;msw&quot;;
import { LocalStorageSessionManager } from &quot;@squide/fakes&quot;;

interface LoginCredentials {
    username: string;
    password: string;
}

const Users = [{
    username: &quot;temp&quot;,
    password: &quot;temp&quot;
}];

export interface Session {
    username: string;
    preferredLanguage: string;
}

// For simplicity, we are using a local storage session manager for this guide.
export const sessionManager = new LocalStorageSessionManager&lt;Session&gt;();

export const requestHandlers: HttpHandler[] = [
    http.post(&quot;/api/login&quot;, async ({ request }) =&gt; {
        const { username, password } = await request.json() as LoginCredentials;

        // Try to match the credentials against existing users.
        const user = Users.find(x =&gt; {
            return x.username === username &amp;&amp; x.password === password;
        });

        // If the user doesn't exist, return a 401.
        if (!user) {
            return new HttpResponse(null, {
                status: 401
            });
        }

        // Login the user by storing the session to the local storage.
        sessionManager.setSession({
            username: user.username
        });

        return new HttpResponse(null, {
            status: 200
        });
    }),

    http.post(&quot;/api/logout&quot;, () =&gt; {
        // Remove the session from the local storage.
        sessionManager.clearSession();

        return new HttpResponse(null, {
            status: 200
        });
    }),

    http.post(&quot;/api/session&quot;, ({ request }) =&gt; {
        // Retrieve the session stored by the /api/login endpoint.
        const session = sessionManager.getSession();

        if (!session) {
            return new HttpResponse(null, {
                status: 401
            });
        }

        return HttpResponse.json(session);
    })
];</code></pre>
</doc-codeblock></div>
<p>Then, introduce a new <code translate="no" v-pre>AuthenticatedLayout</code> component displaying the name of the logged-in user along with a logout button. This layout will retrieve the active user session from the shared <code translate="no" v-pre>useSessionManager</code> hook introduced earlier:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/AuthenticatedLayout.tsx</div>
<pre translate="no" class="language-tsx" data-line="40-41,43-60,72,75"><code v-pre class="language-tsx">import { Suspense, useCallback, type ReactNode, type MouseEvent, type HTMLButtonElement } from &quot;react&quot;;
import { Link, Outlet, navigate } from &quot;react-router/dom&quot;;
import { 
    useNavigationItems,
    useRenderedNavigationItems,
    isNavigationLink,
    type RenderItemFunction,
    type RenderSectionFunction
} from &quot;@squide/firefly&quot;;
import { useSessionManager } from &quot;@sample/shared&quot;;

const renderItem: RenderItemFunction = (item, key) =&gt; {
    // To keep things simple, this sample doesn't support nested navigation items.
    // For an example including support for nested navigation items, have a look at
    // https://workleap.github.io/wl-squide/reference/routing/userenderednavigationitems/
    if (!isNavigationLink(item)) {
        return null;
    }

    const { label, linkProps, additionalProps } = item;

    return (
        &lt;li key={key}&gt;
            &lt;Link {...linkProps} {...additionalProps}&gt;
                {label}
            &lt;/Link&gt;
        &lt;/li&gt;
    );
};

const renderSection: RenderSectionFunction = (elements, key) =&gt; {
    return (
        &lt;ul key={key}&gt;
            {elements}
        &lt;/ul&gt;
    );
};

export function AuthenticatedLayout() {
    const sessionManager = useSessionManager();
    const session = sessionManager?.getSession();

    const handleLogout = useCallback(async (event: MouseEvent&lt;HTMLButtonElement&gt;) =&gt; {
        event.preventDefault();

        const response = await fetch(&quot;/api/logout&quot;, {
            method: &quot;POST&quot;,
            headers: {
                &quot;Content-Type&quot;: &quot;application/json&quot;
            }
        });

        if (response.ok) {
            // Clear the in-memory session to ensure the authentication boundary can do his job.
            sessionManager?.clearSession();

            // Redirect the user to the login page.
            navigate(&quot;/login&quot;);
        }
    }, [navigate, sessionManager]);

    const navigationItems = useNavigationItems();
    const navigationElements = useRenderedNavigationItems(navigationItems, renderItem, renderSection);

    return (
        &lt;&gt;
            &lt;div style={{ display: &quot;flex&quot;, alignItems: &quot;center&quot; }}&gt;
                &lt;nav style={{ width: &quot;100%&quot; }}&gt;
                    {renderedNavigationItems}
                &lt;/nav&gt;
                &lt;div style={{ whiteSpace: &quot;nowrap&quot;, marginRight: &quot;20px&quot; }}&gt;
                    (User: &lt;span style={{ fontWeight: &quot;bold&quot; }}&gt;{session?.user.name}&lt;/span&gt;)
                &lt;/div&gt;
                &lt;div&gt;
                    &lt;button type=&quot;button&quot; onClick={handleLogout}&gt;Log out&lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
                &lt;Outlet /&gt;
            &lt;/Suspense&gt;
        &lt;/&gt;
    );
}</code></pre>
</doc-codeblock></div>
<p>By creating a new <code translate="no" v-pre>AuthenticatedLayout</code> component, much of the layout code has been transferred from the <code translate="no" v-pre>RootLayout</code> to the <code translate="no" v-pre>AuthenticatedLayout</code>, leaving the root layout responsible only for styling the outer wrapper of the application for now:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/RootLayout.tsx</div>
<pre translate="no" class="language-tsx" data-line="7-9"><code v-pre class="language-tsx">import { Suspense } from &quot;react&quot;;
import { Outlet } from &quot;react-router&quot;;

export function RootLayout() {
    return (
        &lt;div style={{ margin: &quot;20px&quot; }}&gt;
            &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
                &lt;Outlet /&gt;
            &lt;/Suspense&gt;
        &lt;/div&gt;
    );
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="setup-the-routes">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#setup-the-routes">#</doc-anchor-trigger>
        <span>Setup the routes</span>
    </h2>
</doc-anchor-target>
<p>Finally, assemble everything:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">host/src/register.tsx</div>
<pre translate="no" class="language-tsx" data-line="13,16,20,22,30-33"><code v-pre class="language-tsx">import { PublicRoutes, ProtectedRoutes, type ModuleRegisterFunction, type FireflyRuntime } from &quot;@squide/firefly&quot;;
import { RootLayout } from &quot;./Rootlayout.tsx&quot;;
import { AuthenticationBoundary } from &quot;./AuthenticationBoundary.tsx&quot;;
import { LoginPage } from &quot;./LoginPage.tsx&quot;;
import { HomePage } from &quot;./Homepage.tsx&quot;;
import { NotFoundPage } from &quot;./NotFoundPage.tsx&quot;;

export const registerHost: ModuleRegisterFunction&lt;FireflyRuntime&gt; = async runtime =&gt; {
    runtime.registerRoute({
        element: &lt;RootLayout /&gt;,
        children: [
            // All the public routes will render before the authenticated layout.
            PublicRoutes,
            {
                // Every page beyond the authenticated boundary are protected.
                element: &lt;AuthenticationBoundary /&gt;,
                children: [
                    {
                        // All the protected routes will render the authenticated layout.
                        element: &lt;AuthenticatedLayout /&gt;,
                        children: [
                            ProtectedRoutes
                        ]
                    }
                ]
            }
        ]
    });

    runtime.registerPublicRoute({
        path: &quot;/login&quot;,
        element: &lt;LoginPage /&gt;
    });

    runtime.registerPublicRoute({
        path: &quot;*&quot;,
        element: &lt;NotFoundPage /&gt;
    });

    runtime.registerRoute({
        index: true,
        element: &lt;HomePage /&gt;
    });

    if (runtime.isMswEnabled) {
        // Files that includes an import to the &quot;msw&quot; package are included dynamically to prevent adding
        // unused MSW stuff to the application bundles.
        const requestHandlers = (await import(&quot;../mocks/handlers.ts&quot;)).requestHandlers;

        runtime.registerRequestHandlers(requestHandlers);
    }
});</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="try-it-rocket">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#try-it-rocket">#</doc-anchor-trigger>
        <span>Try it <span class="docs-emoji">&#x1F680;</span></span>
    </h2>
</doc-anchor-target>
<p>Start the application using the <code translate="no" v-pre>dev</code> script and attempt navigating to the root page (<code translate="no" v-pre>/</code>). You will be redirected to the <code translate="no" v-pre>/login</code> page. Login with <code translate="no" v-pre>&quot;temp&quot;</code> / <code translate="no" v-pre>&quot;temp&quot;</code>, you will be redirected to the root page.</p>
<doc-anchor-target id="troubleshoot-issues">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#troubleshoot-issues">#</doc-anchor-trigger>
        <span>Troubleshoot issues</span>
    </h3>
</doc-anchor-target>
<p>If you are experiencing issues with this guide:</p>
<ul>
<li>Open the <a href="https://developer.chrome.com/docs/devtools/" class="outbound" target="_blank">DevTools</a> console. You&#x27;ll find a log entry for each registration that occurs and error messages if something went wrong.</li>
<li>Refer to a working example on <a href="https://github.com/workleap/wl-squide/tree/main/samples/basic/shell" class="outbound" target="_blank">GitHub</a>.</li>
<li>Refer to the <a href="../../troubleshooting/">troubleshooting</a> page.</li>
</ul>
<div id="retype-backlinks">
    <h2>See also</h2>
    <div class="grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(300px,1fr))]">
        <a href="/wl-squide/updating/migrate-from-v8-to-v15.0/" class="group no-link">
            <div class="flex flex-col">
                <div>
                    <span>Migrate from v8.* to v15.0</span>
                </div>
                <p>This migration guide is an aggregation of all the changes that happened between Squide firefly v9.0 and v15.0:</p>
            </div>
        </a>
        <a href="/wl-squide/updating/migrate-to-firefly-v9.0/" class="group no-link">
            <div class="flex flex-col">
                <div>
                    <span>Migrate to firefly v9.0</span>
                </div>
                <p>If you are migrating from v8.*, follow the Migrate from v8.* to v15.0 guide.</p>
            </div>
        </a>
        <a href="/wl-squide/recipes/override-the-host-layout/" class="group no-link">
            <div class="flex flex-col">
                <div>
                    <span>Override the host layout</span>
                </div>
                <p>The RootLayout component defined in the create an host app starting guide serves as the default layout for the homepage and all the managed routes.</p>
            </div>
        </a>
        <a href="/wl-squide/recipes/" class="group no-link">
            <div class="flex flex-col">
                <div>
                    <span>Recipes</span>
                </div>
                <p>Add authentication</p>
            </div>
        </a>
    </div>
</div>

                
                <!-- Required only on API pages -->
                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
            </div>
            <footer id="retype-content-footer" class="clear-both">
                <div class="flex flex-wrap items-center justify-between mt-14">
                    <a id="retype-edit-this-page" class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-body-link font-body-link hover:text-body-link-hover hover:underline" href="https://github.com/workleap/wl-squide/blob/main/docs/recipes/add-authentication.md" target="_blank" rel="noopener">
                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                        <span>Edit this page</span>
                    </a>
                </div>
            
                <nav id="retype-nextprev" class="print:hidden flex mt-14">
                    <div class="w-1/2">
                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../recipes/">
                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                            <span>
                                <span class="block text-xs font-normal text-base-text-muted">Previous</span>
                                <span class="block mt-1">Recipes</span>
                            </span>
                        </a>
                    </div>
            
                    <div class="w-1/2">
                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../recipes/override-the-host-layout/">
                            <span>
                                <span class="block text-xs font-normal text-right text-base-text-muted">Next</span>
                                <span class="block mt-1">Override the host layout</span>
                            </span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                        </a>
                    </div>
                </nav>
            </footer>
        </main>

        <div id="retype-page-footer" class="print:border-none border-t border-base-border pt-6 mb-8">
            <footer class="flex flex-wrap items-center justify-between print:justify-center">
                <div id="retype-footer-links" class="print:hidden">
                    <ul class="flex flex-wrap items-center text-sm">
                        <li>
                            <a class="inline-flex items-center mr-4 py-2 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-footer-link hover:text-footer-link-hover md:mb-0" href="../../about/">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M10.97 8.265a1.45 1.45 0 0 0-.487.57.75.75 0 0 1-1.341-.67c.2-.402.513-.826.997-1.148C10.627 6.69 11.244 6.5 12 6.5c.658 0 1.369.195 1.934.619a2.45 2.45 0 0 1 1.004 2.006c0 1.033-.513 1.72-1.027 2.215-.19.183-.399.358-.579.508l-.147.123a4.329 4.329 0 0 0-.435.409v1.37a.75.75 0 1 1-1.5 0v-1.473c0-.237.067-.504.247-.736.22-.28.486-.517.718-.714l.183-.153.001-.001c.172-.143.324-.27.47-.412.368-.355.569-.676.569-1.136a.953.953 0 0 0-.404-.806C12.766 8.118 12.384 8 12 8c-.494 0-.814.121-1.03.265ZM13 17a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/><path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"/>
                                    </g>
                                </svg>
                                <span>About</span>
                            </a>
                        </li>
                        <li>
                            <a class="inline-flex items-center mr-4 py-2 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-footer-link hover:text-footer-link-hover md:mb-0" href="https://github.com/workleap/wl-squide/blob/main/LICENSE" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                    <g fill="currentColor">
                                        <path d="M16.53 9.78a.75.75 0 0 0-1.06-1.06L11 13.19l-1.97-1.97a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l5-5Z"/><path d="m12.54.637 8.25 2.675A1.75 1.75 0 0 1 22 4.976V10c0 6.19-3.771 10.704-9.401 12.83a1.704 1.704 0 0 1-1.198 0C5.77 20.705 2 16.19 2 10V4.976c0-.758.489-1.43 1.21-1.664L11.46.637a1.748 1.748 0 0 1 1.08 0Zm-.617 1.426-8.25 2.676a.249.249 0 0 0-.173.237V10c0 5.46 3.28 9.483 8.43 11.426a.199.199 0 0 0 .14 0C17.22 19.483 20.5 15.461 20.5 10V4.976a.25.25 0 0 0-.173-.237l-8.25-2.676a.253.253 0 0 0-.154 0Z"/>
                                    </g>
                                </svg>
                                <span>License</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div id="retype-copyright" class="print:justify-center py-2 text-footer-text font-footer-link text-sm leading-relaxed"><p> Copyright 2026 - Workleap</p></div>
            </footer>
        </div>
    </div>

    <!-- Rendered if sidebar right is enabled -->
    <!-- Sidebar right skeleton-->
    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-sidebar-right-bg border-sidebar-right-border lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:translate-x-0 sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton">
        <div class="pl-5">
            <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
            <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
            <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
        </div>
    </div>

    <!-- User should be able to hide sidebar right -->
    <doc-sidebar-right v-cloak></doc-sidebar-right>
</div>

        </div>
    </div>

    <doc-search-mobile></doc-search-mobile>
    <doc-back-to-top></doc-back-to-top>
</div>


    <div id="retype-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Add authentication", level: 2, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 2 }</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-root" content="/wl-squide">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.12.0-preview2.814588559717">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.12.0-preview2">

    <!-- Primary Meta Tags -->
    <title>Migrate to firefly v9.0</title>
    <meta name="title" content="Migrate to firefly v9.0">
    <meta name="description" content="If you are migrating from v8.*, follow the Migrate from v8.* to v15.0 guide.">

    <!-- Canonical -->
    <link rel="canonical" href="https://workleap.github.io/wl-squide/updating/migrate-to-firefly-v9.0/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://workleap.github.io/wl-squide/updating/migrate-to-firefly-v9.0/">
    <meta property="og:title" content="Migrate to firefly v9.0">
    <meta property="og:description" content="If you are migrating from v8.*, follow the Migrate from v8.* to v15.0 guide.">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://workleap.github.io/wl-squide/updating/migrate-to-firefly-v9.0/">
    <meta property="twitter:title" content="Migrate to firefly v9.0">
    <meta property="twitter:description" content="If you are migrating from v8.*, follow the Migrate from v8.* to v15.0 guide.">

    <script data-cfasync="false">(function(){var cl=document.documentElement.classList,ls=localStorage.getItem("retype_scheme"),hd=cl.contains("dark"),hl=cl.contains("light"),wm=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;if(ls==="dark"||(!ls&&wm&&!hd&&!hl)){cl.remove("light");cl.add("dark")}else if(ls==="light"||(!ls&&!wm&&!hd&&!hl)){cl.remove("dark");cl.add("light")}})();</script>

    <link id="retype-favicon" rel="icon" href="../../static/favicon.png" />
    <link href="../../resources/css/retype.css?v=3.12.0-preview2.814588559717" rel="stylesheet">

    <script data-cfasync="false" src="../../resources/js/config.js?v=3.12.0-preview2.814588559717" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../resources/js/retype.js?v=3.12.0-preview2" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../resources/js/lunr.js?v=3.12.0-preview2.814588559717" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../resources/js/prism.js?v=3.12.0-preview2.814588559717" defer></script>

    <link href="https://workleap.github.io/wl-idp-docs-hub/static/retype-customization.css" rel="stylesheet" />

</head>
<body>
    <div id="retype-app" class="relative text-base antialiased text-base-text bg-base-bg font-body">
        <div class="absolute bottom-0 left-0" style="top: 5rem; right: 50%"></div>
    
        <header id="retype-header" class="sticky top-0 z-30 flex w-full h-16 bg-header-bg border-b border-header-border md:h-20">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton retype-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="retype-sidebar-left-toggle-button"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-hub-link" href="https://workleap.github.io/wl-idp-docs-hub/" title="Workleap's Frontend Platform homepage">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="30" viewBox="0 0 12 30" fill="currentColor" aria-label="Home" focusable="false" role="img">
                                <path d="M10.6763 23.0822C10.4303 23.328 10.0967 23.4661 9.74885 23.4661C9.40103 23.4661 9.06744 23.328 8.82135 23.0822L1.38384 15.6447C1.13806 15.3986 1 15.065 1 14.7172C1 14.3694 1.13806 14.0358 1.38384 13.7897L8.82135 6.35222C9.0703 6.1205 9.39939 5.99432 9.73945 6.0002C10.0795 6.00607 10.404 6.14354 10.6448 6.38372C10.885 6.62452 11.0225 6.94906 11.0284 7.28912C11.0342 7.62917 10.9081 7.95826 10.6763 8.20722L4.16635 14.7172L10.6763 21.2272C10.9221 21.4733 11.0602 21.8069 11.0602 22.1547C11.0602 22.5025 10.9221 22.8361 10.6763 23.0822Z" />
                            </svg>
                        </a>
                        <a id="retype-branding-logo" href="../../" class="flex items-center leading-snug text-2xl">
                            <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                                <img class="max-h-10 dark:hidden md:inline-block" src="../../static/logo.png">
                                <img class="max-h-10 hidden dark:inline-block" src="../../static/logo.png">
                            </span>
                            <span class="dark:text-white font-bold line-clamp-1 md:line-clamp-2">Squide</span>
                        </a>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block border-base-border"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav id="retype-header-nav" class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="../../introduction/getting-started/">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"/>
                                        </g>
                                    </svg>
                                    <span>Home</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/issues" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Zm9.5 2a2 2 0 1 1-.001-3.999A2 2 0 0 1 12 14Z"/>
                                        </g>
                                    </svg>
                                    <span>Found a bug?</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/discussions" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                        </g>
                                    </svg>
                                    <span>Feature requests</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/releases" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M7.75 6.5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z"/><path d="M2.5 1h8.44a1.5 1.5 0 0 1 1.06.44l10.25 10.25a1.5 1.5 0 0 1 0 2.12l-8.44 8.44a1.5 1.5 0 0 1-2.12 0L1.44 12A1.497 1.497 0 0 1 1 10.94V2.5A1.5 1.5 0 0 1 2.5 1Zm0 1.5v8.44l10.25 10.25 8.44-8.44L10.94 2.5Z"/>
                                        </g>
                                    </svg>
                                    <span>Releases</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"/>
                                        </g>
                                    </svg>
                                    <span>Github</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://www.npmjs.com/settings/squide/packages" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M0 0H24V24H0V0Z" fill="#CC0000"/><path d="M11.9184 2.57758H2.57764V21.4214H11.9175V7.32958H16.6695V21.4214H21.4215V2.57758H11.9184Z" fill="white"/>
                                        </g>
                                    </svg>
                                    <span>NPM</span>
                                </a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="retype-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
    
        <div id="retype-container" class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-sidebar-left-bg border-sidebar-left-border sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton">
            
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                    <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                </div>
            
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-base-border">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-base-border">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="../../introduction/getting-started/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"/>
                                                </g>
                                            </svg>
                                            <span>Home</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/issues" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Zm9.5 2a2 2 0 1 1-.001-3.999A2 2 0 0 1 12 14Z"/>
                                                </g>
                                            </svg>
                                            <span>Found a bug?</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/discussions" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                                </g>
                                            </svg>
                                            <span>Feature requests</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide/releases" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M7.75 6.5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z"/><path d="M2.5 1h8.44a1.5 1.5 0 0 1 1.06.44l10.25 10.25a1.5 1.5 0 0 1 0 2.12l-8.44 8.44a1.5 1.5 0 0 1-2.12 0L1.44 12A1.497 1.497 0 0 1 1 10.94V2.5A1.5 1.5 0 0 1 2.5 1Zm0 1.5v8.44l10.25 10.25 8.44-8.44L10.94 2.5Z"/>
                                                </g>
                                            </svg>
                                            <span>Releases</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://github.com/workleap/wl-squide" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"/>
                                                </g>
                                            </svg>
                                            <span>Github</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-header-text font-header-text-weight hover:text-header-text-hover" href="https://www.npmjs.com/settings/squide/packages" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M0 0H24V24H0V0Z" fill="#CC0000"/><path d="M11.9184 2.57758H2.57764V21.4214H11.9175V7.32958H16.6695V21.4214H21.4215V2.57758H11.9184Z" fill="white"/>
                                                </g>
                                            </svg>
                                            <span>NPM</span>
                                        </a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 bg-body-bg">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div id="retype-main" class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="retype-markdown" id="retype-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="retype-sidebar-right-toggle"></div>
                                <nav id="retype-breadcrumb" class="breadcrumb" aria-label="Breadcrumb">
                                    <ol role="list">
                                        <li class="pr-4">
                                            <a href="../../updating/" class="pr-4">
                                                Updating
                                            </a>
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                                                <path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/>
                                            </svg>
                                        </li>
                                        <li class="pr-4">
                                            <a href="../../updating/migrate-to-firefly-v9.0/" class="pr-4">
                                                Migrate to firefly v​9.​0
                                            </a>
                                        </li>
                                    </ol>
                                </nav>
                
                                <!-- Page content  -->
<doc-anchor-target id="migrate-to-firefly-v90" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#migrate-to-firefly-v90">#</doc-anchor-trigger>
        <span>Migrate to firefly v9.0</span>
    </h1>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1.5 rounded-tl-lg rounded-bl-lg bg-callout-warning"></div>
    <div class="flex w-full py-4 border border-l-0 rounded-tr-lg rounded-br-lg doc-callout bg-callout-base-bg border-callout-base-border" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-callout-warning" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>If you are migrating from <code translate="no" v-pre>v8.*</code>, follow the <a href="../migrate-from-v8-to-v15.0/">Migrate from v8.* to v15.0</a> guide.</p>
        </div>
    </div>
</div>
<div class="flex mb-6">
    <div class="shrink-0 w-1.5 rounded-tl-lg rounded-bl-lg bg-callout-warning"></div>
    <div class="flex w-full py-4 border border-l-0 rounded-tr-lg rounded-br-lg doc-callout bg-callout-base-bg border-callout-base-border" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-callout-warning" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Although this migration guide is labeled for version <code translate="no" v-pre>9.0.0</code>, it is actually intended for migrating from version <code translate="no" v-pre>8.*</code> to version <code translate="no" v-pre>9.2.1</code>. Therefore, please ensure you upgrade to <code translate="no" v-pre>@squide/firefly</code> version <code translate="no" v-pre>9.2.1</code> instead of <code translate="no" v-pre>9.0.0</code>.</p>
<p>We apologize for the confusion.</p>
        </div>
    </div>
</div>
<p>This major version of <code translate="no" v-pre>@squide/firefly</code> introduces <a href="https://tanstack.com/query/latest" class="outbound" target="_blank">TanStack Query</a> as the official library for fetching the global data of a Squide&#x27;s application and features a complete rewrite of the <a href="../../reference/routing/approuter/">AppRouter</a> component, which now uses a state machine to manage the application&#x27;s bootstrapping flow.</p>
<p>Prior to <code translate="no" v-pre>v9.0</code>, Squide applications couldn&#x27;t use TanStack Query to fetch global data, making it <strong>challenging</strong> for Workleap&#x27;s applications to <strong>keep</strong> their <strong>global data</strong> in <strong>sync</strong> with the <strong>server state</strong>. With <code translate="no" v-pre>v9.0</code>, applications can now leverage <a href="../../guides/fetch-global-data/">custom wrappers</a> of the TanStack Query&#x27;s <a href="https://tanstack.com/query/latest/docs/framework/react/reference/useQueries" class="outbound" target="_blank">useQueries</a> hook to fetch and keep their global data up-to-date with the server state. Additionally, the new <a href="../../reference/registration/usedeferredregistrations/#register-or-update-deferred-registrations">deferred registrations update</a> feature allows applications to even <strong>keep</strong> their conditional <strong>navigation items in sync</strong> with the <strong>server state</strong>.</p>
<p>Finally, with <code translate="no" v-pre>v9.0</code>, Squide&#x27;s philosophy has evolved. We used to describe Squide as a shell for <strong>federated</strong> applications. Now, we refer to Squide as a shell for <strong>modular</strong> applications. After playing with Squide&#x27;s <a href="../../reference/registration/registerlocalmodules/">local module</a> feature for a while, we discovered that Squide offers significant value even for <strong>non-federated applications</strong>, which triggered this shift in philosophy.</p>
<doc-anchor-target id="breaking-changes">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#breaking-changes">#</doc-anchor-trigger>
        <span>Breaking changes</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="removed">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#removed">#</doc-anchor-trigger>
        <span>Removed</span>
    </h3>
</doc-anchor-target>
<ul>
<li>The <code translate="no" v-pre>useAreModulesRegistered</code> hook has been removed, use the <a href="../../reference/routing/useisbootstrapping/">useIsBootstrapping</a> hook instead.</li>
<li>The <code translate="no" v-pre>useAreModulesReady</code> hook has been removed, use the <a href="../../reference/routing/useisbootstrapping/">useIsBootstrapping</a> hook instead.</li>
<li>The <code translate="no" v-pre>useIsMswStarted</code> hook has been removed, use the <a href="../../reference/routing/useisbootstrapping/">useIsBootstrapping</a> hook instead.</li>
<li>The <code translate="no" v-pre>completeModuleRegistrations</code> function as been removed use the <a href="../../reference/registration/usedeferredregistrations/">useDeferredRegistrations</a> hook instead.</li>
<li>The <code translate="no" v-pre>completeLocalModulesRegistrations</code> function has been removed use the <a href="../../reference/registration/usedeferredregistrations/">useDeferredRegistrations</a> hook instead.</li>
<li>The <code translate="no" v-pre>completeRemoteModuleRegistrations</code> function has been removed use the <a href="../../reference/registration/usedeferredregistrations/">useDeferredRegistrations</a> hook instead.</li>
<li>The <code translate="no" v-pre>useSession</code> hook has been removed, define your own React context instead.</li>
<li>The <code translate="no" v-pre>useIsAuthenticated</code> hook has been removed, define your own React context instead.</li>
<li>The <code translate="no" v-pre>sessionAccessor</code> option has been removed from the <a href="../../reference/runtime/runtime-class/">FireflyRuntime</a> options, define your own React context instead.</li>
<li>The <code translate="no" v-pre>ManagedRoutes</code>placeholder has been removed, use <a href="../../reference/routing/publicroutes/">PublicRoutes</a> and <a href="../../reference/routing/protectedroutes/">ProtectedRoutes</a> instead.</li>
</ul>
<doc-anchor-target id="renamed">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#renamed">#</doc-anchor-trigger>
        <span>Renamed</span>
    </h3>
</doc-anchor-target>
<ul>
<li>The <code translate="no" v-pre>setMswAsStarted</code> function has been renamed to <a href="../../reference/msw/setmswasready/">setMswIsReady</a>.</li>
<li>A route definition <code translate="no" v-pre>$name</code> option has been renamed to <a href="../../reference/runtime/runtime-class/#register-a-route-with-an-id">$id</a>.</li>
<li>The <a href="../../reference/runtime/runtime-class/#register-routes">registerRoute</a> <code translate="no" v-pre>parentName</code> option has been renamed to <a href="../../reference/runtime/runtime-class/#register-nested-routes">parentId</a>.</li>
</ul>
<doc-anchor-target id="others">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#others">#</doc-anchor-trigger>
        <span>Others</span>
    </h3>
</doc-anchor-target>
<ul>
<li>The <code translate="no" v-pre>@squide/firefly</code> package now takes a peerDependency on <code translate="no" v-pre>@tanstack/react-query</code>.</li>
<li>The <code translate="no" v-pre>@squide/firefly</code> package doesn&#x27;t takes a peerDependency on <code translate="no" v-pre>react-error-boundary</code> anymore.</li>
</ul>
<doc-anchor-target id="removed-support-for-deferred-routes">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#removed-support-for-deferred-routes">#</doc-anchor-trigger>
        <span>Removed support for deferred routes</span>
    </h3>
</doc-anchor-target>
<p><a href="../../reference/registration/registerlocalmodules/#defer-the-registration-of-navigation-items">Deferred registration</a> functions no longer support route registration; they are now <strong>exclusively</strong> used for <strong>registering navigation items</strong>. Since deferred registration functions can now be re-executed whenever the global data changes, registering routes in deferred registration functions no longer makes sense as updating the routes registry after the application has bootstrapped could lead to issues.</p>
<p>This change is a significant improvement for Squide&#x27;s internals, allowing us to eliminate quirks like:</p>
<ul>
<li><p>Treating unknown routes as <code translate="no" v-pre>protected</code>: When a user initially requested a deferred route, Squide couldn&#x27;t determine if the route was <code translate="no" v-pre>public</code> or <code translate="no" v-pre>protected</code> because it wasn&#x27;t registered yet. As a result, for that initial request, the route was considered <code translate="no" v-pre>protected</code>, even if the deferred registration later registered it as <code translate="no" v-pre>public</code>.</p>
</li>
<li><p>Mandatory wildcard <code translate="no" v-pre>*</code> route registration: Previously, Squide&#x27;s bootstrapping would fail if the application didn&#x27;t include a wildcard route.</p>
</li>
</ul>
<p>Before:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="4-7"><code v-pre class="language-tsx">export const register: ModuleRegisterFunction&lt;FireflyRuntime, unknown, DeferredRegistrationData&gt; = runtime =&gt; {
    return ({ featureFlags }) =&gt; {
        if (featureFlags?.featureB) {
            runtime.registerRoute({
                path: &quot;/page&quot;,
                element: &lt;Page /&gt;
            });

            runtime.registerNavigationItem({
                $id: &quot;page&quot;,
                $label: &quot;Page&quot;,
                to: &quot;/page&quot;
            });
        }
    };
}</code></pre>
</doc-codeblock></div>
<p>Now:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="2-5"><code v-pre class="language-tsx">export const register: ModuleRegisterFunction&lt;FireflyRuntime, unknown, DeferredRegistrationData&gt; = runtime =&gt; {
    runtime.registerRoute({
        path: &quot;/page&quot;,
        element: &lt;Page /&gt;
    });

    return ({ featureFlags }) =&gt; {
        if (featureFlags?.featureB) {
            runtime.registerNavigationItem({
                $id: &quot;page&quot;,
                $label: &quot;Page&quot;,
                to: &quot;/page&quot;
            });
        }
    };
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="conditional-routes">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#conditional-routes">#</doc-anchor-trigger>
        <span>Conditional routes</span>
    </h4>
</doc-anchor-target>
<p>To handle direct access to a conditional route, each conditional route&#x27;s endpoint should return a <code translate="no" v-pre>403</code> status code if the user is not authorized to view the route. Those <code translate="no" v-pre>403</code> errors should then be handled by the nearest error boundary.</p>
<doc-anchor-target id="plugins-constructors-now-requires-a-runtime-instance">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#plugins-constructors-now-requires-a-runtime-instance">#</doc-anchor-trigger>
        <span>Plugin&#x27;s constructors now requires a runtime instance</span>
    </h3>
</doc-anchor-target>
<p>Prior to this release, plugin instances received the current runtime instance through a <code translate="no" v-pre>_setRuntime</code> function. This approach caused issues because some plugins required a reference to the runtime at instantiation. To address this, plugins now receive the <strong>runtime instance</strong> directly as a <strong>constructor</strong> argument.</p>
<p>Before:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="8-10"><code v-pre class="language-tsx">export class MyPlugin extends Plugin {
    readonly #runtime: Runtime;

    constructor() {
        super(MyPlugin.name);
    }

    _setRuntime(runtime: Runtime) {
        this.#runtime = runtime;
    }
}</code></pre>
</doc-codeblock></div>
<p>Now:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="2"><code v-pre class="language-tsx">export class MyPlugin extends Plugin {
    constructor(runtime: Runtime) {
        super(MyPlugin.name, runtime);
    }
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="plugins-now-registers-with-a-factory-function">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#plugins-now-registers-with-a-factory-function">#</doc-anchor-trigger>
        <span>Plugins now registers with a factory function</span>
    </h3>
</doc-anchor-target>
<p>Prior to this release, the <a href="../../reference/runtime/runtime-class/">FireflyRuntime</a> accepted plugin instances as options. Now, <code translate="no" v-pre>FireflyRuntime</code> accepts <strong>factory functions</strong> instead of plugin instances. This change allows plugins to receive the runtime instance as a constructor argument.</p>
<p>Before:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">const runtime = new FireflyRuntime({
    plugins: [new MyPlugin()]
});</code></pre>
</doc-codeblock></div>
<p>Now:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">const runtime = new FireflyRuntime({
    plugins: [x =&gt; new MyPlugin(x)]
});</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="rewrite-of-the-approuter-component">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#rewrite-of-the-approuter-component">#</doc-anchor-trigger>
        <span>Rewrite of the <code translate="no" v-pre>AppRouter</code> component</span>
    </h3>
</doc-anchor-target>
<p>This release features a full rewrite of the <a href="../../reference/routing/approuter/">AppRouter</a> component. The <code translate="no" v-pre>AppRouter</code> component used to handle many concerns like global data fetching, deferred registrations, error handling and a loading state. Those concerns have been delegated to the consumer code, supported by the new <a href="../../reference/routing/useisbootstrapping/">useIsBootstrapping</a>, <a href="../../reference/tanstack-query/usepublicdataqueries/">usePublicDataQueries</a>, <a href="../../reference/tanstack-query/useprotecteddataqueries/">useProtectedDataQueries</a> and <a href="../../reference/registration/usedeferredregistrations/">useDeferredRegistrations</a> hooks.</p>
<p>Before:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">export function App() {
    const [featureFlags, setFeatureFlags] = useState&lt;FeatureFlags&gt;();
    const [subscription, setSubscription] = useState&lt;FeatureFlags&gt;();

    const handleLoadPublicData = useCallback((signal: AbortSignal) =&gt; {
        return fetchPublicData(setFeatureFlags, signal);
    }, []);

    const handleLoadProtectedData = useCallback((signal: AbortController) =&gt; {
        return fetchProtectedData(setSubscription, signal);
    }, []);

    const handleCompleteRegistrations = useCallback(() =&gt; {
        return completeModuleRegistrations(runtime, {
            featureFlags,
            subscription
        });
    }, [runtime, featureFlags, subscription]);

    return (
        &lt;AppRouter
            fallbackElement={&lt;div&gt;Loading...&lt;/div&gt;}
            errorElement={&lt;RootErrorBoundary /&gt;}
            waitForMsw
            onLoadPublicData={handleLoadPublicData}
            onLoadProtectedData={handleLoadProtectedData}
            isPublicDataLoaded={!!featureFlags}
            isPublicDataLoaded={!!subscription}
            onCompleteRegistrations={handleCompleteRegistrations}
        &gt;
            {(routes, providerProps) =&gt; (
                &lt;RouterProvider router={createBrowserRouter(routes)} {...providerProps} /&gt;
            )}
        &lt;/AppRouter&gt;
    );
}</code></pre>
</doc-codeblock></div>
<p>Now:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">function BootstrappingRoute() {
    const [featureFlags] = usePublicDataQueries([getFeatureFlagsQuery]);
    const [subscription] = useProtectedDataQueries([getSubscriptionQuery]);

    const data: DeferredRegistrationData = useMemo(() =&gt; ({ 
        featureFlags,
        subscription
    }), [featureFlags, subscription]);

    useDeferredRegistrations(data);

    if (useIsBootstrapping()) {
        return &lt;div&gt;Loading...&lt;/div&gt;;
    }

    return &lt;Outlet /&gt;;
}

export function App() {
    return (
        &lt;AppRouter waitForMsw waitForPublicData&gt;
            {({ rootRoute, registeredRoutes, routerProviderProps }) =&gt; {
                return (
                    &lt;RouterProvider
                        router={createBrowserRouter([
                            {
                                element: rootRoute,
                                errorElement: &lt;RootErrorBoundary /&gt;,
                                children: [
                                    {
                                        element: &lt;BootstrappingRoute /&gt;,
                                        children: registeredRoutes
                                    }
                                ]
                            }
                        ])}
                        {...routerProviderProps}
                    /&gt;
                );
            }}
        &lt;/AppRouter&gt;
    );
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="new-hooks-and-functions">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#new-hooks-and-functions">#</doc-anchor-trigger>
        <span>New hooks and functions</span>
    </h2>
</doc-anchor-target>
<ul>
<li>A new <a href="../../reference/routing/useisbootstrapping/">useIsBoostrapping</a> hook is now available.</li>
<li>A new <a href="../../reference/registration/usedeferredregistrations/">useDeferredRegistrations</a> hook is now available.</li>
<li>A new <a href="../../reference/tanstack-query/usepublicdataqueries/">usePublicDataQueries</a> hook is now available.</li>
<li>A new <a href="../../reference/tanstack-query/useprotecteddataqueries/">useProtectedDataQueries</a> hook is now available.</li>
<li>A new <a href="../../reference/tanstack-query/isglobaldataquerieserror/">isGlobalDataQueriesError</a> function is now available.</li>
<li>A new <a href="../../reference/runtime/runtime-class/#register-a-public-route">registerPublicRoute</a> function is now available.</li>
</ul>
<doc-anchor-target id="improvements">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#improvements">#</doc-anchor-trigger>
        <span>Improvements</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Deferred registration functions now always receive a <code translate="no" v-pre>data</code> argument.</li>
<li>Deferred registration functions now receives a new <a href="../../reference/registration/registerlocalmodules/#use-the-deferred-registration-operation-argument">operations</a> argument.</li>
<li>Navigation items now include a <a href="../../reference/runtime/runtime-class/#conditionally-render-a-navigation-item">$canRender</a> option, enabling modules to control whether a navigation item should be rendered.</li>
</ul>
<doc-anchor-target id="new-id-option-for-navigation-items">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#new-id-option-for-navigation-items">#</doc-anchor-trigger>
        <span>New <code translate="no" v-pre>$id</code> option for navigation items</span>
    </h3>
</doc-anchor-target>
<p>Navigation items now supports a new <code translate="no" v-pre>$id</code> option. Previously, most navigation item React elements used a <code translate="no" v-pre>key</code> property generated by concatenating the item&#x27;s <code translate="no" v-pre>level</code> and <code translate="no" v-pre>index</code>, which goes against React&#x27;s best practices:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">&lt;li key={`${level}-${index}`}&gt;</code></pre>
</doc-codeblock></div>
<p>It wasn&#x27;t that much of a big deal since navigation items never changed once the application was bootstrapped. Now, with the deferred registration functions re-executing when the global data changes, the registered navigation items can be updated post-bootstrapping. The new <code translate="no" v-pre>$id</code> option allows the navigation item to be configured with a unique key at registration, preventing UI shifts.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="2"><code v-pre class="language-tsx">runtime.registerNavigationItem({
    $id: &quot;page-1&quot;,
    $label: &quot;Page 1&quot;,
    to: &quot;/page-1&quot;
});</code></pre>
</doc-codeblock></div>
<p>The configured <code translate="no" v-pre>$id</code> option is then passed as a <code translate="no" v-pre>key</code> argument to the <a href="../../reference/routing/userenderednavigationitems/">useRenderedNavigationItems</a> rendering functions:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="1,5,13,15"><code v-pre class="language-tsx">const renderItem: RenderItemFunction = (item, key) =&gt; {
    const { label, linkProps, additionalProps } = item;

    return (
        &lt;li key={key}&gt;
            &lt;Link {...linkProps} {...additionalProps}&gt;
                {label}
            &lt;/Link&gt;
        &lt;/li&gt;
    );
};

const renderSection: RenderSectionFunction = (elements, key) =&gt; {
    return (
        &lt;ul key={key}&gt;
            {elements}
        &lt;/ul&gt;
    );
};

const navigationElements = useRenderedNavigationItems(navigationItems, renderItem, renderSection);</code></pre>
</doc-codeblock></div>
<blockquote>
<p>If no <code translate="no" v-pre>$id</code> is configured for a navigation item, the <code translate="no" v-pre>key</code> argument will be a concatenation of the <code translate="no" v-pre>level</code> and <code translate="no" v-pre>index</code> argument.</p>
</blockquote>
<doc-anchor-target id="migrate-an-host-application">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#migrate-an-host-application">#</doc-anchor-trigger>
        <span>Migrate an host application</span>
    </h2>
</doc-anchor-target>
<blockquote>
<p>A migration example from <code translate="no" v-pre>v8</code> to <code translate="no" v-pre>v9</code> is available for the <a href="https://github.com/workleap/wl-squide-monorepo-template/commit/87489f0541cc959f437133f2afd8c0a9db160efe" class="outbound" target="_blank">wl-squide-monorepo-template</a>.</p>
</blockquote>
<p>The <code translate="no" v-pre>v9.0</code> release introduces several breaking changes affecting the host application code. Follow these steps to migrate an existing host application:</p>
<ol>
<li>Add a dependency to <code translate="no" v-pre>@tanstack/react-query</code>.</li>
<li>Transition to the new <code translate="no" v-pre>AppRouter</code> component. <doc-anchor-trigger to="#rewrite-of-the-approuter-component">View example</doc-anchor-trigger>
<ul>
<li><code translate="no" v-pre>onLoadPublicData</code> + <code translate="no" v-pre>isPublicDataLoaded</code> becomes <a href="../../reference/tanstack-query/usepublicdataqueries/">usePublicDataQueries</a></li>
<li><code translate="no" v-pre>onLoadProtectedData</code> + <code translate="no" v-pre>isProtectedDataLoaded</code> becomes <a href="../../reference/tanstack-query/useprotecteddataqueries/">useProtectedDataQueries</a></li>
<li><code translate="no" v-pre>onCompleteRegistrations</code> becomes <a href="../../reference/registration/usedeferredregistrations/">useDeferredRegistrations</a></li>
<li><code translate="no" v-pre>fallbackElement</code> becomes <a href="../../reference/routing/useisbootstrapping/">useIsBootstrapping</a></li>
<li><code translate="no" v-pre>errorElement</code> is removed and somewhat replaced by a <doc-anchor-trigger to="#root-error-boundary">root error boundary</doc-anchor-trigger></li>
</ul>
</li>
<li>Create a <code translate="no" v-pre>TanStackSessionManager</code> class and the <code translate="no" v-pre>SessionManagerContext</code>. Replace the session&#x27;s deprecated hooks by creating the customs <code translate="no" v-pre>useSession</code> and <code translate="no" v-pre>useIsAuthenticated</code> hooks. <a href="../../guides/add-authentication/#create-a-session-manager">View example</a></li>
<li>Remove the <code translate="no" v-pre>sessionAccessor</code> option from the <code translate="no" v-pre>FireflyRuntime</code> instance. Update the <code translate="no" v-pre>BootstrappingRoute</code> component to create a <code translate="no" v-pre>TanStackSessionManager</code> instance and share it down the component tree using a <code translate="no" v-pre>SessionManagedContext</code> provider. <a href="../../guides/add-authentication/#fetch-the-session">View example</a></li>
<li>Add or update the <code translate="no" v-pre>AuthenticationBoundary</code> component to use the new <code translate="no" v-pre>useIsAuthenticated</code> hook. Global data fetch request shouldn&#x27;t be throwing 401 error anymore when the user is not authenticated. <a href="../../guides/add-authentication/#add-an-authentication-boundary">View example</a></li>
<li>Update the <code translate="no" v-pre>AuthenticatedLayout</code> component to use the session manager instance to clear the session. Retrieve the session manager instance from the context defined in the <code translate="no" v-pre>BootstrappingRoute</code> component using the <code translate="no" v-pre>useSessionManager</code> hook. <a href="../../guides/add-authentication/#define-an-authenticated-layout">View example</a></li>
<li>Update the <code translate="no" v-pre>AuthenticatedLayout</code> component to use the new <code translate="no" v-pre>key</code> argument. <doc-anchor-trigger to="#new-id-option-for-navigation-items">View example</doc-anchor-trigger></li>
<li>Replace the <code translate="no" v-pre>ManagedRoutes</code> placeholder with the new <a href="../../reference/routing/publicroutes/">PublicRoutes</a> and <a href="../../reference/routing/protectedroutes/">ProtectedRoutes</a> placeholders. <a href="../../introduction/create-host/#homepage">View example</a></li>
<li>Convert all deferred routes into static routes. <doc-anchor-trigger to="#removed-support-for-deferred-routes">View example</doc-anchor-trigger></li>
<li>Add an <code translate="no" v-pre>$id</code> option to the navigation item registrations. <doc-anchor-trigger to="#new-id-option-for-navigation-items">View example</doc-anchor-trigger></li>
</ol>
<doc-anchor-target id="waitformsw-waitforpublicdata-waitforprotecteddata">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#waitformsw-waitforpublicdata-waitforprotecteddata">#</doc-anchor-trigger>
        <span><code translate="no" v-pre>waitForMsw</code>, <code translate="no" v-pre>waitForPublicData</code>, <code translate="no" v-pre>waitForProtectedData</code></span>
    </h3>
</doc-anchor-target>
<p>The <code translate="no" v-pre>AppRouter</code> component accepts the <code translate="no" v-pre>waitForMsw</code>, <code translate="no" v-pre>waitForPublicData</code>, and <code translate="no" v-pre>waitForProtectedData</code> properties. These properties are forwarded directly to the Squide bootstrapping flow state machine, where they are used to determine its initial state.</p>
<p>If the application register MSW <a href="https://mswjs.io/docs/concepts/request-handler/" class="outbound" target="_blank">request handlers</a> with the <a href="../../reference/runtime/runtime-class/#register-request-handlers">runtime.registerRequestHandlers</a> function, add the <code translate="no" v-pre>waitForMsw</code> property to the <code translate="no" v-pre>AppRouter</code> component:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">&lt;AppRouter waitForMsw&gt;
    ...
&lt;/AppRouter&gt;</code></pre>
</doc-codeblock></div>
<p>If the application uses the <a href="../../reference/tanstack-query/usepublicdataqueries/">usePublicDataQueries</a>, add the <code translate="no" v-pre>waitForPublicData</code> property to the <code translate="no" v-pre>AppRouter</code> component:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">&lt;AppRouter waitForPublicData&gt;
    ...
&lt;/AppRouter&gt;</code></pre>
</doc-codeblock></div>
<p>If the application uses the <a href="../../reference/tanstack-query/useprotecteddataqueries/">useProtectedDataQueries</a>, add the <code translate="no" v-pre>waitForProtectedData</code> property to the <code translate="no" v-pre>AppRouter</code> component:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx"><code v-pre class="language-tsx">&lt;AppRouter waitForProtectedData&gt;
    ...
&lt;/AppRouter&gt;</code></pre>
</doc-codeblock></div>
<p>Otherwise, don&#x27;t define any of those three properties on the <code translate="no" v-pre>AppRouter</code> component.</p>
<doc-anchor-target id="root-error-boundary">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#root-error-boundary">#</doc-anchor-trigger>
        <span>Root error boundary</span>
    </h3>
</doc-anchor-target>
<p>When transitioning to the new <code translate="no" v-pre>AppRouter</code> component, make sure to nest the <code translate="no" v-pre>RootErrorBoundary</code> component within the <code translate="no" v-pre>AppRouter</code> component&#x27;s render function.</p>
<p>Before:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="6-7"><code v-pre class="language-tsx">export const registerHost: ModuleRegisterFunction&lt;FireflyRuntime&gt; = runtime =&gt; {
    runtime.registerRoute({
        element: &lt;RootLayout /&gt;,
        children: [
            {
                $id: &quot;root-error-boundary&quot;,
                errorElement: &lt;RootErrorBoundary /&gt;,
                children: [
                    ManagedRoutes
                ]
            }
        ]
    });
});</code></pre>
</doc-codeblock></div>
<p>Now:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre translate="no" class="language-tsx" data-line="10"><code v-pre class="language-tsx">export function App() {
    return (
        &lt;AppRouter waitForMsw&gt;
            {({ rootRoute, registeredRoutes, routerProviderProps }) =&gt; {
                return (
                    &lt;RouterProvider
                        router={createBrowserRouter([
                            {
                                element: rootRoute,
                                errorElement: &lt;RootErrorBoundary /&gt;,
                                children: registeredRoutes
                            }
                        ])}
                        {...routerProviderProps}
                    /&gt;
                );
            }}
        &lt;/AppRouter&gt;
    );
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="migrate-a-module">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#migrate-a-module">#</doc-anchor-trigger>
        <span>Migrate a module</span>
    </h2>
</doc-anchor-target>
<blockquote>
<p>A migration example from <code translate="no" v-pre>v8</code> to <code translate="no" v-pre>v9</code> is available for the <a href="https://github.com/workleap/wl-squide-monorepo-template/commit/87489f0541cc959f437133f2afd8c0a9db160efe" class="outbound" target="_blank">wl-squide-monorepo-template</a>.</p>
</blockquote>
<p>The changes in <code translate="no" v-pre>v9.0</code> have minimal impact on module code. To migrate an existing module, follow these steps:</p>
<ol>
<li>Convert all deferred routes into static routes. <doc-anchor-trigger to="#removed-support-for-deferred-routes">View example</doc-anchor-trigger></li>
<li>Add a <code translate="no" v-pre>$id</code> option to the navigation item registrations. <doc-anchor-trigger to="#new-id-option-for-navigation-items">View example</doc-anchor-trigger></li>
</ol>
<div class="flex mb-6">
    <div class="shrink-0 w-1.5 rounded-tl-lg rounded-bl-lg bg-callout-warning"></div>
    <div class="flex w-full py-4 border border-l-0 rounded-tr-lg rounded-br-lg doc-callout bg-callout-base-bg border-callout-base-border" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-callout-warning" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>Ensure that modules registering deferred routes are updated to convert those routes into static routes and are deployed before the host application. <strong>Failure to do so may lead to runtime errors in the production environment</strong>.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="isolated-development">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#isolated-development">#</doc-anchor-trigger>
        <span>Isolated development</span>
    </h3>
</doc-anchor-target>
<p>If your module is set up for <a href="../../guides/develop-a-module-in-isolation/">isolated development</a>, ensure that you also apply the <doc-anchor-trigger to="#migrate-an-host-application">host application migration steps</doc-anchor-trigger> to your isolated setup.</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer id="retype-content-footer" class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a id="retype-edit-this-page" class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-body-link font-body-link-weight hover:text-body-link-hover hover:underline" href="https://github.com/workleap/wl-squide/blob/main/docs/updating/migrate-to-firefly-v9.0.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Edit this page</span>
                                    </a>
                                </div>
                            
                                <nav id="retype-nextprev" class="print:hidden flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../updating/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-base-text-muted">Previous</span>
                                                <span class="block mt-1">Updating</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-body-link border border-base-border hover:border-base-border-hover rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../updating/migrate-to-firefly-v9.3/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-base-text-muted">Next</span>
                                                <span class="block mt-1">Migrate to firefly v​9.​3</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div id="retype-page-footer" class="print:border-none border-t border-base-border pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between print:justify-center">
                                <div id="retype-footer-links" class="print:hidden">
                                    <ul class="flex flex-wrap items-center text-sm">
                                        <li>
                                            <a class="inline-flex items-center mr-4 py-2 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-footer-link hover:text-footer-link-hover md:mb-0" href="../../about/">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                    <g fill="currentColor">
                                                        <path d="M10.97 8.265a1.45 1.45 0 0 0-.487.57.75.75 0 0 1-1.341-.67c.2-.402.513-.826.997-1.148C10.627 6.69 11.244 6.5 12 6.5c.658 0 1.369.195 1.934.619a2.45 2.45 0 0 1 1.004 2.006c0 1.033-.513 1.72-1.027 2.215-.19.183-.399.358-.579.508l-.147.123a4.329 4.329 0 0 0-.435.409v1.37a.75.75 0 1 1-1.5 0v-1.473c0-.237.067-.504.247-.736.22-.28.486-.517.718-.714l.183-.153.001-.001c.172-.143.324-.27.47-.412.368-.355.569-.676.569-1.136a.953.953 0 0 0-.404-.806C12.766 8.118 12.384 8 12 8c-.494 0-.814.121-1.03.265ZM13 17a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/><path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"/>
                                                    </g>
                                                </svg>
                                                <span>About</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="inline-flex items-center mr-4 py-2 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-footer-link hover:text-footer-link-hover md:mb-0" href="https://github.com/workleap/wl-squide/blob/main/LICENSE" target="_blank">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                    <g fill="currentColor">
                                                        <path d="M16.53 9.78a.75.75 0 0 0-1.06-1.06L11 13.19l-1.97-1.97a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l5-5Z"/><path d="m12.54.637 8.25 2.675A1.75 1.75 0 0 1 22 4.976V10c0 6.19-3.771 10.704-9.401 12.83a1.704 1.704 0 0 1-1.198 0C5.77 20.705 2 16.19 2 10V4.976c0-.758.489-1.43 1.21-1.664L11.46.637a1.748 1.748 0 0 1 1.08 0Zm-.617 1.426-8.25 2.676a.249.249 0 0 0-.173.237V10c0 5.46 3.28 9.483 8.43 11.426a.199.199 0 0 0 .14 0C17.22 19.483 20.5 15.461 20.5 10V4.976a.25.25 0 0 0-.173-.237l-8.25-2.676a.253.253 0 0 0-.154 0Z"/>
                                                    </g>
                                                </svg>
                                                <span>License</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div id="retype-copyright" class="print:justify-center py-2 text-footer-text font-footer-link-weight text-sm leading-relaxed"><p>© Copyright 2025 - Workleap</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-sidebar-right-bg border-sidebar-right-border lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-skeleton-bg rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="retype-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Migrate to firefly v9.0", level: 2, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
